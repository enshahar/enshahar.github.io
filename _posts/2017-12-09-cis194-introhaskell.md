---
layout:     post
title:      "[하스켈 기초][CIS194] 하스켈 소개"
date:       2017-12-09 22:47:00
summary:    "[하스켈기초][CIS194] 하스켈 소개 및 기본 문법 정리"
categories: Haskell CIS194 Introduction
---

하스켈을 소개하고 기본 문법을 정리합니다. 간략하게 정리하고 ghci로 테스트해보는 선에서 넘어갑시다.

## 하스켈이란?

- 지연계산(lazy), 함수형(functional), 정적 타입 지정(statically typed) 프로그래밍 언어
- 1980년대 프로그래밍 언어 연구자들이 만든 위원회에서 정의한 언어(아니! 위원회에서 정의했는데 선한게 나올리가..)
- 기본적으로는 함수형 프로그래밍 언어 연구에 필요한 공통 언어역할을 하기 위해 좋은 아이디어를 모아서 만든 언어

### 함수형 언어?

- 함수(function): 수학시간에 배운 함수(순수함수). 내부를 모르는 블랙박스. 입력에 따라서만 출력이 결정됨(외부 환경 등에 의해 출력이 바뀌는 일이 없음)
- 함수형 언어라고 할때는 보통 두가지를 염두에 두는 것임
-- 함수가 1급 시민(first class): 함수를 일반 값과 똑같이 다룰 수 있다. 함수에 이름을 붙이거나(=변수에 저장하거나), 함수를 함수에서 반환하거나, 함수를 인자에 넘기거나 할 수 있다.
-- 명령을 실행한다는 개념보다는 식(expresison)의 값을 구한다(evaluation)는 개념을 중심으로 프로그램이 구성된다.

### 순수함수?

하스켈 식은 항상 참조 투명(referentially transparent)함. 이는 다음과 같은 뜻임.
- 상태 변경(mutation)이 없다. 모든 것(변수, 데이터 구조 등등)이 불변(immutable)이다.
- 식은 결코 부수효과(side effect, 전역 변수를 갱신하거나 I/O를 발생시키는 등의 일)를 발생시키지 않는다.
- 같은 함수에 같은 인자를 넘기면 항상 같은 결과를 얻는다.

미쳤나? 어떻게 상태 변경과 부수효과가 없이 코딩이 가능할까? => 생각하는 방법을 바꿀 필요는 확실히 있다. 하지만 잇점도 있다.

- 동등성에 의한 추론과 리팩터링이 가능함. 하스켈에서는 어떤 식/값을 다른 동등한 식/값으로 언든지 바꿀 수 있다. 산술 계산시 등호(`=`)의 좌항과 우항의 값을 서로 바꿔써도 무방한 것과 같다.
- 병렬성 확보 가능. 식이 많이 있어도 서로 영향을 끼치지 못하기 때문에 원하는데로 병렬로 실행해도 된다.
- 머리가 덜 아픔. 부수 효과가 없어서 전역변수나 상태 변경으로 인해 겪는 어려움이나 내가 모르는 어떤 곳에서 생긴 변화가 내 코드에 영향을 끼치는 일이 없으므로 디버깅이나 유지보수나 프로그램의 성질을 추론하기가 더 쉽다.

### 지연?

 하스켈에서는 각 식의 값이 실제로 필요하기 전까지는 그 식을 계산하지 않는다. 결정 자체는 단순하지만 그로 인한 파급효과는 엄청나다. 이 과목을 배우는 동안 이에 대해 계속 살펴볼 것이다. 그런 파급 효과를 몇가지 여기서 이야기하자면:

 - 함수를 선언해서 새로운 제어 구조를 만들기 쉽다(이게 lazy와 무슨 관계일까요? 모르겠습니다 T.T).
 - 무한한 데이터 구조를 정의하고 사용할 수 있다.
 - 더 합성성(compositionality)이 좋아진다. 
 - 단점으로 프로그램의 시간/공간 사용 패턴을 이해하기가 어려워진다.

### 정적 타입 지정?

 - 모든 하스켈 식에는 타입이 있으며, 그 타입은 컴파일 시점에 검사된다. 타입 검사를 통과하지 못하는 프로그램은 컴파일될 수 없다.

## 본 강의가 다룰 주제

다음 세가지 주제를 본 강의에서 주로 다룬다.

### 타입

정적 타입 지정 시스템을 보면 짜증이 날 때가 많다. 자바, C++ 등을 보면 실제로 그렇다. 이는 정적 타입 지정 자체의 문제라기 보다는 자바, C++ 등의 타입 시스템의 표현력이 떨어져서다. 이 강의에서는 하스켈 타입 시스템을 자세히 살펴본다. 하스켈 타입 시스템의 특징은 다음과 같다.

- 하스켈 타입 시스템은 생각을 명확히 하고 프로그램 구조를 깔끔하게 표현할 수 있게 도움을 준다: 하스켈 프로그램을 작성할 때 가장 먼저 해야 할 일은 타입을 정리하는 것이다. 하스켈 타입 시스템이 복잡하기 때문에 타입을 정리하는 작업 자체가 간단하지 않은 설계 과정이라 할 수 있고, 이렇게 타입을 정하는 과정은 작성할 프로그램에 대한 생각을 깔끔하게 정리하는 과정이기도 하다.
- 프로그램에 대한 문서 역할을 한다: 타입 시스템의 표현력이 좋다면 함수의 타입만 봐도 그 함수가 어떤 일을 하고 어떻게 그 함수룰 활용할 수 있을지 쉽게 추측할 수 있다.  
- 실행 시점 오류를 컴파일 시점 오류로 바꿔줄 수 있다: 테스트를 많이 작성해서 프로그램의 문제를 걸러내기를 희망하는 대신, 타입을 잘 설계해서 가능한 오류를 최대한 컴파일시 걸러낼 수 있다. "컴파일만 되면 제대로 작동해"라고 말하는 것은 보통은 건방진 말이지만 하스켈에서는 이 말이 성립될 가능성이 다른 언어에 비해 더 높다.

### 추상화

"반복하지 말라(Don't Repeat Yourself)"라는 말을 자주 들었을 것이다. 또는 "추상화 원칙(Abstraction Principle)"이라는 말을 들었을 수도 있다. 이는 모든 반복을 제거하자는 말이다. 즉, 어떤 생각이나 알고리즘, 데이터 구조의 일부 등이 코드 안에 단 한번만 나타나게 하자는 이야기다. 비슷한 코드들을 모아서 유사한 부분을 하나로 묶어내는 과정을 추상화라고 부른다.

하스켈은 추상화를 하기 아주 좋은 언어다. 파라미터화한 다형성(parametric polymorphism), 고차 함수(high-order function), 타입 클래스 등이 중복과 싸울 때 큰 도움이 된다(어려운 단어에 기죽지 말자! 나중에 나오겠지!). 

### 통밀 프로그래밍

이 강의를 통해 통밀(wholemeal) 프로그래밍을 살펴본다. 랄프 하인즈(Ralf Hinze)의 글을 인용한다. 

> 함수형 프로그래밍 언어는 통밀 프로그래밍에 쓰기 훌륭하다. 통밀 프로그래밍이라는 용어는 제레인트 존스(Geraint Jones)가 만든 말로, 프로그램을 통크게 작성하는 것이다. 각 원소를 순서대로 처리한다고 생각하는 대신 시퀀스 전체를 처리한다고 생각하고, 각 해법을 하나하나 찾아내는 대신 해법의 공간을 만들어내며, 단일 경로(path)를 상상하는 대신 그래프(graph) 전체를 상상한다. 통밀 프로그래밍을 사용하면 주어진 문제에 대해 새로운 직관을 얻거나 새로운 관점을 얻을 수 있는 경우가 자주 있다. 이 생각을 프로젝션을 활용한 프로그래밍(projective programming)이라는 아이디어로 보충할 수 있다. 먼저 더 일번적인 문제를 풀고, 그렇게 푼 일반적인 프로그램을 특화함으로써 관심이 있는 부분을 추출해낸다.

C나 자바같은 언어로 된 다음 의사코드(pseudo-code)를 보자.

```C
int acc = 0;
for ( int i = 0; i < lst.length; i++ ) {
  acc = acc + 3 * lst[i];
}
```

이 코드는 너무 "인덱스적"이다. 즉, 현재 인덱스를 유지하면서 배열을 이터레이션하는 낮은 수준의 작업에 관심을 집중하고 있다. 게다가 배열의 각 원소를 3배로 만들고, 결과를 합치는 2가지 유용한 연산이 서로 뒤섞여있다.

하스켈에서는 

```Haskel
sum (map (3*) lst)
``` 

이라고 쓸 수 있다.

## 하스켈 언어 기초

여기서는 기본적인 하스켈 문법을 다룬다. 

### 선언과 변수

